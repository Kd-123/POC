<div *ngIf="successAlert" class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>Registration successful</strong> 
    <button type="button" class="close" data-bs-dismiss="alert" style="float: right;" aria-label="Close" routerLink="/login">
      <span aria-hidden="true">&times;</span>
    </button>
</div>

<div *ngIf="dangerAlert" class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>Error.</strong> This email id is already registered.
    <button type="button" class="close" data-bs-dismiss="alert" style="float: right;" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
</div>

<div class="container">
        <div class="row g-0 ">
            <form [formGroup]="registration" (ngSubmit)="[RegisterSubmited()]" class="border p-4 rounded-3 rounded-top wrapper" id="formBorder">
        <div class="row g-0" >
            <div class="col text-center p-2 mg-3" style="background-color: #e9fce6;">
                <span class="fs-3" style="color: black;">Register</span>
            </div>
        </div>
        <div class="row">
            <p class="mb-4">* fields are required</p>
        </div>
        <div class="row">
            <div class="col mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-user icon"></i><span>*</span></span>
                <!-- <label for="firstname" class="form-label">First name</label><span> *</span> -->
                <input type="text" class="form-control" id="firstname" formControlName="firstname" placeholder="Enter First name">
                </div>

                <!-- ?. - if reuired is null therefore to handle it-->
                <div class="form-text text-danger" *ngIf="FirstName.errors?.['required'] && (FirstName.touched || FirstName.dirty)" >
                    First Name is Required
                </div>
                <div class="form-text text-danger" *ngIf="FirstName.errors?.['minlength'] && (FirstName.touched || FirstName.dirty)">
                    First name is too short.
                </div>
                <div class="form-text text-danger" *ngIf="FirstName.errors?.['pattern'] && (FirstName.touched || FirstName.dirty)">
                    Enter valid First Name
                </div>
            </div>
            <div class="col mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-user icon"></i><span>*</span></span>
                <!-- <label for="lastname" class="form-label">Last name</label><span> *</span> -->
                <input type="text" class="form-control" id="lastname" formControlName="lastname" placeholder="Enter Last name">
                </div>

                <div class="form-text text-danger" *ngIf="LastName.errors?.['required'] && (LastName.touched || LastName.dirty)" >
                    Last Name is Required
                </div>
                <div class="form-text text-danger" *ngIf="LastName.errors?.['minlength'] && (LastName.touched || LastName.dirty)">
                    Last name is too short.
                </div>
                <div class="form-text text-danger" *ngIf="LastName.errors?.['pattern'] && (LastName.touched || LastName.dirty)">
                    Enter valid Last Name
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                
                <div class="input-group">
                    <span class="input-group-text" ><i class="fa fa-envelope icon"></i><span>*</span></span>
                    
                <!-- <label for="email" class="form-label">Email Address</label><span> *</span> -->
                <input type="email" class="form-control" id="email" formControlName="email"
                placeholder="Enter email id">
                </div>
            
                <div class="form-text text-danger" *ngIf="Email.errors?.['required'] && (Email.touched || Email.dirty)" >
                    Email is Required
                </div>
                <div class="form-text text-danger" *ngIf="Email.errors?.['email'] && (Email.touched || Email.dirty)" >
                    Enter valid Email
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                <div class="input-group">
                    <span class="input-group-text" ><i class="fa fa-mobile icon"></i><span>*</span></span>
                <!-- <label for="mobile" class="form-label">Mobile Number</label><span> *</span> -->
                <input type="text" class="form-control" id="mobile" formControlName="mobile" placeholder="Enter mobile number">
                </div>

                <div class="form-text text-danger" *ngIf="Mobile.errors?.['required'] && (Mobile.touched || Mobile.dirty)" >
                    Mobile is Required
                </div>
                <div class="form-text text-danger" *ngIf="Mobile.errors?.['pattern'] && (Mobile.touched || Mobile.dirty)" >
                    Enter valid mobile number
                </div>
            </div>
            <div class="col ps-3 mb-3 mt-2">
                Gender : 
                <!-- <div class="m-1">Gender</div> -->
                <div class="form-check form-check-inline">
                    <input type="radio" class="form-check-input" value="male" id="male" formControlName="gender">
                    <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" class="form-check-input" value="female" id="female" formControlName="gender">
                    <label class="form-check-label" for="female">Female</label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-lock icon"></i><span>*</span></span>
                <!-- <label for="pwd" class="form-label">Password</label><span> *</span> -->
                <input type="password" class="form-control" id="pwd" formControlName="pwd" placeholder="Enter password">
                </div>

                <div class="form-text text-danger" *ngIf="Pwd.errors?.['required'] && (Pwd.touched || Pwd.dirty)" >
                    Password is Required
                </div>
                <div class="form-text text-danger" *ngIf="Pwd.errors?.['minlength'] || Pwd.errors?.['maxlength'] && (Pwd.touched || Pwd.dirty)" >
                   <p style="margin-bottom: 0px;">Password should be at least 8 </p><p style="margin-top: 0px;">at max 15 characters long.</p> 
                </div>
            </div>
            <div class="col mb-3">
                <div class="input-group">
                    <span class="input-group-text"><i class="fa fa-lock icon"></i><span>*</span></span>
                <!-- <label for="rpwd" class="form-label">Repeat Password</label><span> *</span> -->
                <input type="password" class="form-control" id="rpwd" formControlName="rpwd" placeholder="Repeat the password" (keyup)="checkRepeatPassword()">
                </div>

                <div class="form-text text-danger" *ngIf="Rpwd.errors?.['required'] && (Rpwd.touched || Rpwd.dirty)" >
                    Repeat Password is Required
                </div>
                <div class="form-text text-danger" [ngStyle]="{'display':repeatPasswordCheck}" *ngIf="Rpwd.touched || Rpwd.dirty && repeatPasswordCheck=='inline'">
                    Repeat password does not match.
                </div>
                <!-- <div class="form-text text-danger" *ngIf="( Rpwd.dirty) && registration.hasError('passwordMistmatch') " >
                    Repeat password does not match
                </div> -->

            </div>
        </div>
        <div class="row">
            <div class="col-6 offset-3 mt-4">
                <div class="d-grid mb-3">
                    <button type="submit" class="btn btn-success" [disabled]="registration.invalid">Submit</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div style="text-align: center;">
                Already a user? <a href="login"> Login Here</a>
            </div>
        </div>
    
    </form>
</div>

